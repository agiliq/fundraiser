{% extends "base.html" %}
{% load widget_tweaks %}
{% block main_title %}Campaigns{% endblock %}
{% block title %}Create a Campaign{%endblock%}
{% block extrahead %}
 <style type="text/css">
  form.form-horizontal {padding-left: 150px;}
  h4 {padding-top:30px;padding-left: 40px;}
  div.errors {padding-left: 400px;}
  span.help-inline {color:#b94a48;}
  </style>

    <script src="{{STATIC_URL}}fundraiser/js/bootbox.min.js"></script>

  <script type="text/javascript">
     $(document).ready(function(){
			function readURL(input) {
			        if (input.files && input.files[0]) 
			        {
			        	 if (input.files[0].size > 3145728 )
				        	   {
                                  bootbox.alert("Image size should not be greater than 3MB");
                                  // console.log(input.files[0].size);
				        	   }
			        	 else 
			        	   {  
					            var reader = new FileReader();
					            
					            reader.onload = function (e) {
									$('#info_img').attr('src', e.target.result);
									$('.show_man').show();
					                $('#upload_change_image').val('Change Image');
					            }
					            
					            reader.readAsDataURL(input.files[0]);
					       }     
			        }
			    }
		    $("#upload_change_image").change(function(){
		        readURL(this);
		    });			    

     });
  </script>
{% endblock %}
{% block content %}
  <h4>Create a Campaign</h4>
  	<p>&nbsp;</p>
  <div>
  <form method="post" action="{% url 'campaigns:create_a_campaign' %}" class="form-horizontal" enctype="multipart/form-data">
  	 {% csrf_token %}
        <div class="control-group">
            <label class="control-label" for="campaign_name">Category</label>
            <div class="controls">{{ form.category }}
                 {% if errors.category.0 %}
                        <span class="help-inline">{{ errors.category.0}}</span>
                {% endif %}
            </div>
            
        </div>    	         
		<div class="control-group">
	        <label class="control-label" for="campaign_name">Campaign Name</label>
	        <div class="controls">{{ form.campaign_name }}
	        	 {% if errors.campaign_name.0 %}
		            	<span class="help-inline">{{ errors.campaign_name.0}}</span>
	            {% endif %}
	        </div>
            
        </div>        
		<div class="control-group">
	        <label class="control-label" for="target_amount">Target Amount</label>
	        <div class="controls">{{ form.target_amount }}
	        	 {% if errors.target_amount.0 %}
		            	<span class="help-inline">{{ errors.target_amount.0}}</span>
	            {% endif %}
	        </div>
        </div>        

		<div class="control-group">
	        <label class="control-label" for="cause">Cause</label>
	        <div class="controls">{{ form.cause }}
	        	 {% if errors.cause.0 %}
		            	<span class="help-inline">{{ errors.cause.0}}</span>
	            {% endif %}
	        </div>
	    </div>
        <div class="control-group">
            <label class="control-label">Fund Distribution</label>
            <div class="controls">
                <table class="fund-dist">
                    <thead>
                        <tr>
                            <th>Description</th>
                            <th>Amount</th>
                            <th> </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="row1">
                            <td >
                                <input type="text" value="" name="fund-dist-desc1">
                            </td>
                            <td >
                            <input type="text"  value="" name="fund-dist-amt1">
                            </td>
                            <td>
                                <i class="icon-plus-sign"></i><i class="icon-minus-sign" hidden></i>
                            </td>
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Total</label>
            <div class="controls">
                <span id="from-fund"></span>/ <span id="total"></span><span id="errors" style="color:red"></span>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Rewards</label>
            <div class="controls">
                <table class="rewards">
                    <tbody>
                        <tr class="row1">
                            <td >
                                <input type="text" value="" name="rewards1">
                            </td>
                            <td>
                                <i class="icon-plus-sign"></i><i class="icon-minus-sign" hidden></i>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">Team Members</label>
            <div class="controls">
                <table class="team-member">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Role</th>
                            <th>Short Bio</th>
                            <th>Facebook URL</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="row1">
                            <td >
                                <input type="text" name="name1" value="{{user}}">
                            </td>
                            <td >
                            <input type="text"   name="role1">
                            </td>
                            <td >
                                <input type="text" name="short-bio1">
                            </td>
                            <td >
                            <input type="text" name="fb-url1">
                            </td>
                            <td>
                                <i class="icon-plus-sign"></i><i class="icon-minus-sign"></i>
                            </td>
                        </tr>

                    </tbody>
                </table>
        </div>
	    <div class="control-group">
	        <label class="control-label" for="cause">Image</label>
	        <div class="controls">
		        {% render_field form.image placeholder=form.image.label id="upload_change_image" %}
	        </div>
	    </div>
	    <div class="hide show_man" >
	    	<div class="" style="padding-left: 185px;padding-bottom: 50px;padding-top: 20px;"> 
		    	 <img id="info_img" src=""  width="300" height="300">
	    	</div>
	    </div>
        <div class="control-group" >
          <div class="controls">
            <button type="submit" value="submit"  class="btn btn-primary" >Submit</button>
          </div>
        </div>      
  </form>
  </div>
{% endblock %}
